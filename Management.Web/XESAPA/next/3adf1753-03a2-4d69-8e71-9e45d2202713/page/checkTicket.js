module.exports=__NEXT_REGISTER_PAGE("/checkTicket",function(){var e=webpackJsonp([25],{1070:function(e,t,a){e.exports=a(1071)},1071:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=a(28);var l=a.n(n);var r=a(0);var c=a.n(r);var s=a(91);var o=a(55);var i=a(70);function m(e){return function(){var t=this,a=arguments;return new Promise(function(n,l){var r=e.apply(t,a);function c(e,t){try{var a=r[e](t);var c=a.value}catch(e){l(e);return}a.done?n(c):Promise.resolve(c).then(s,o)}function s(e){c("next",e)}function o(e){c("throw",e)}s()})}}function u(e){u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return u(e)}function p(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function b(e,t,a){t&&f(e.prototype,t);a&&f(e,a);return e}function d(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;return E(e)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=a(49);var N=function(e){v(t,e);function t(e){var a;h(this,t);a=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={showFiled:true,bookingInfo:[],value:"",code:"",phone:"",isTicketInfo:false,isValidCode:true,status:"",auth:""};a.handleChange=a.handleChange.bind(E(a));a.handleSubmit=a.handleSubmit.bind(E(a));a.change=a.change.bind(E(a));return a}b(t,[{key:"handleChange",value:function e(t){t.preventDefault();this.setState({value:t.target.value})}},{key:"change",value:function e(t){t.preventDefault();this.setState(p({},t.target.name,t.target.value))}},{key:"componentWillMount",value:function e(){localStorage.token?this.state.phone=0+localStorage.userInfo.split(",")[1].split(":")[1].split('"')[1]:this.state.phone=""}},{key:"handleSubmit",value:function e(t){var a=this;t.preventDefault();var n=JSON.parse(localStorage.getItem("token"))||this.props.token;this.setState({auth:n});Object(i["f"])(n,this.state.value).then(function(e){if("Success"===e.message){a.setState({bookingInfo:e.data});a.state.phone===a.state.bookingInfo[0].customer.phone?a.setState({isTicketInfo:true,showFiled:false,isValidCode:true}):a.setState({status:"Số điện thoại không đúng",isValidCode:false,showFiled:true,isTicketInfo:false});""===a.state.phone&&a.setState({status:"Vui lòng nhập vào số điện thoại",isValidCode:false})}else a.setState({status:"Vui lòng nhập mã code",isValidCode:false})}).catch(function(e){alert(e)})}},{key:"render",value:function e(){var t=this.state,a=t.bookingInfo,n=t.auth;var l=a&&a[0];console.log(n);return c.a.createElement("div",{className:"black bg-white  pt2  w-100 mb5 "},c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("table",{className:" w-30-l w-100 fl pv3 ml6-l"},c.a.createElement("tr",null,c.a.createElement("td",{className:" f3 b  color-menu   w-100",colspan:"3"},"Nhập thông tin vé")),c.a.createElement("tr",null,c.a.createElement("td",{className:"gray pv2 "},c.a.createElement("input",{type:"text",placeholder:"Mã Code ",name:"code",onChange:this.handleChange,className:"w-80-l w-100 pv2 form-input"}))),c.a.createElement("tr",null,c.a.createElement("td",{className:"gray pv2"},c.a.createElement("input",{type:"text",name:"phone",onChange:this.change,value:this.state.phone,placeholder:"Số điện thoại",className:"w-80-l w-100 pv2 form-input"}))),!this.state.isValidCode&&c.a.createElement("tr",null,c.a.createElement("td",{className:"tc pr5 "},c.a.createElement("span",{className:"red "},this.state.status))),c.a.createElement("tr",null,c.a.createElement("td",{className:"pv2 "},c.a.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"w-80-l w-100 pv2 form-input pointer white bg-color-login dim "},"Kiểm tra vé"))),c.a.createElement("tr",null,c.a.createElement("td",{className:" pv3  w-100 "},c.a.createElement("div",{className:"w-80-l w-100 pv3 ph4 bg-light-gray"},c.a.createElement("b",{className:""},"Lưu ý"),c.a.createElement("br",null),"Trường hợp bạn không thể hủy vé qua mạng hoặc muốn đổi sang vé khác vui lòng liên hệ chúng tôi qua số điện thoại 1900 7070.")))))),this.state.showFiled&&c.a.createElement("div",null,c.a.createElement("div",{className:" w-50-l w-100 mv5 pv3 br3 b--black-10 fl db-l dn ba tc bg-form "},"Vui lòng nhập vào thông tin và bấm kiểm tra vé"),c.a.createElement("div",{className:"w-50-l w-100 fl"},c.a.createElement("img",{src:"/static/xehaiau/img/vxr-launch-image.png"}))),this.state.isTicketInfo&&c.a.createElement("div",{className:" w-60-l w-100 pt3 fl "},c.a.createElement("table",{className:" w-100"},c.a.createElement("tr",null,c.a.createElement("th",{className:"w-50 tl f4 ttu ",rowspan:"3"},l.customer.name)),c.a.createElement("tr",null,c.a.createElement("td",{className:"gray f6"},"Phone: ",l.customer.phone)),c.a.createElement("tr",null,c.a.createElement("td",{className:"gray f6"},"Email: ",l.customer.email))),c.a.createElement("hr",{className:"ba b--dotted mv2 b--black-20 "}),c.a.createElement("table",{className:"ttc f6  w-100"},c.a.createElement("tr",null,c.a.createElement("td",{className:"b pb3  "},"hãng xe:"),c.a.createElement("td",{className:" pb3    ttu "},l.company),c.a.createElement("td",{className:"b pb3  "},"giá vé:"),c.a.createElement("td",{className:"fl"},l.fare," VND/vé")),c.a.createElement("tr",{className:""},c.a.createElement("td",{className:" b pb3"},"Đón Khách:"),c.a.createElement("td",{className:"pb3  "},l.from),c.a.createElement("td",{className:" b pb3 "},"phụ thu:"),c.a.createElement("td",{className:"fl"}," ","0VND(phụ thu đón/người)",c.a.createElement("br",null)," 0VND(phụ thu trả/người) ",c.a.createElement("br",null)," 0VND(phụ thu khác/người)"," ")),c.a.createElement("tr",null,c.a.createElement("td",{className:"b pb3"},"giờ lên xe (dự kiến):"),c.a.createElement("td",{className:"pb3 "},l.trip_date),c.a.createElement("td",{className:" b pb3 color-all-fare"},"Tổng tiền đã thanh toán:"," "),c.a.createElement("td",{className:"fl color-menu"}," ",l.amount," VND")),c.a.createElement("tr",{className:""},c.a.createElement("td",{className:"b pb3"},"trả khách:"),c.a.createElement("td",{className:"pb3  "},l.to),c.a.createElement("td",{className:"b pb3  "},"Hình thức thanh toán:"),c.a.createElement("td",{className:"pb3 "},null===l.payment_info?"chưa thanh toán":"1"===l.payment_info.split(":")[1]?"Chưa thanh toán":""===l.payment_info.split(":")[1]?"Chưa thanh toán":l.payment_info.split(":")[1])),c.a.createElement("tr",null,c.a.createElement("td",{className:"b pb3"},"số ghế:"),c.a.createElement("td",{className:"pb3 "},c.a.createElement("span",null,l.seats)),c.a.createElement("td",{className:"b pb3 color-all-fare"},"Tình Trạng vé:"),c.a.createElement("td",{className:"red pb3 "},3===l.ticket.status?"Đã Hủy":2===l.ticket.status?"Đã thanh toán":"Mới đặt chổ"),c.a.createElement("td",{className:"pb3 pointer"},c.a.createElement("a",{href:"/huy-ve?code=".concat(l.ticket.code,"?tripcode=").concat(l.trip_code),className:"pointer"},3===l.ticket.status?"":(2===l.ticket.status,"Hủy vé")))),c.a.createElement("tr",null,c.a.createElement("td",{className:"b pb3"},"tuyến đường:"),c.a.createElement("td",{className:"pb3 "},c.a.createElement("span",null,l.trip_name)),c.a.createElement("td",{className:"b pb3  color-all-fare"},"",3===l.ticket.status?"Lý Do Hủy Vé:":(2===l.ticket.status,"")),c.a.createElement("td",{className:"red pb3 "},3===l.ticket.status?l.transactions.CANCELED:(2===l.ticket.status,"")))),c.a.createElement("hr",{className:"ba b--dotted mv2 b--black-20  w-90-l"}),c.a.createElement("div",null,c.a.createElement("a",{href:"/",className:"ba mt3 br3 b--black-20 w-20-l w-100 bg-color-login white dim fr mr7-l tc pointer link ttc pv2"},"quay lại trang chủ"))))}}]);return t}(r["Component"]);var y=function e(t){var a=t.companyInfo,n=t.services,l=t.ticket,r=t.token,o=t.popularTrip,i=t.code,m=t.aboutList;return c.a.createElement(s["a"],{companyInfo:a,services:n,token:r,aboutList:m,popularTrip:o},c.a.createElement("div",{className:"flex items-center"},c.a.createElement(N,{page:"checkTicket",token:r,code:i})))};y.getInitialProps=function(){var e=m(l.a.mark(function e(t){var a,n,r,c,s,o,i,m,u;return l.a.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:a=t.companyInfo;n=t.ctx,r=n.query,c=n.req;console.log(r.code);s=r.code||"";o=t.aboutList;i=t.popularTrip;m=t.token;u=t.services;return l.abrupt("return",{companyInfo:a,services:u,popularTrip:i,code:s,aboutList:o,token:m});case 9:case"end":return l.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t["default"]=y}},[1070]);return{page:e.default}});